<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ForgeWorks Tracking</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:Arial, sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
    .container{max-width:1200px;margin:0 auto;background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,.1)}
    .header{background:linear-gradient(135deg,#2c3e50 0%,#34495e 100%);color:#fff;padding:30px;text-align:center}
    .header h1{font-size:2.5em;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
    .header p{font-size:1.1em;opacity:.9}
    .main-content{padding:30px}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}
    .stat-card{background:linear-gradient(135deg,#74b9ff 0%,#0984e3 100%);color:#fff;padding:25px;border-radius:10px;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:transform .3s}
    .stat-card:hover{transform:translateY(-5px)}
    .stat-card h3{font-size:2em;margin-bottom:5px}
    .controls{display:flex;gap:15px;margin-bottom:30px;flex-wrap:wrap}
    .btn{padding:12px 24px;border:none;border-radius:25px;font-size:1em;cursor:pointer;transition:all .3s;font-weight:bold;text-transform:uppercase;letter-spacing:1px}
    .btn-primary{background:linear-gradient(135deg,#00b894 0%,#00a085 100%);color:#fff}
    .btn-secondary{background:linear-gradient(135deg,#fdcb6e 0%,#e17055 100%);color:#fff}
    .btn-danger{background:linear-gradient(135deg,#fd79a8 0%,#e84393 100%);color:#fff}
    .btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,.2)}
    .order-form{background:#f8f9fa;padding:25px;border-radius:10px;margin-bottom:30px;display:none}
    .form-group{margin-bottom:20px}
    .form-group label{display:block;margin-bottom:8px;font-weight:bold;color:#2c3e50}
    .form-group input,.form-group select,.form-group textarea{width:100%;padding:12px;border:2px solid #e9ecef;border-radius:8px;font-size:1em;transition:border-color .3s}
    .form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:#74b9ff}
    .orders-table{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1)}
    .table-header{background:linear-gradient(135deg,#6c5ce7 0%,#a29bfe 100%);color:#fff;padding:20px;font-size:1.2em;font-weight:bold}
    .order-item{padding:20px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;transition:background .3s}
    .order-item:hover{background:#f8f9fa}
    .order-title{font-size:1.2em;font-weight:bold;color:#2c3e50;margin-bottom:5px}
    .order-details{color:#6c757d;font-size:.9em}
    .order-status{padding:8px 16px;border-radius:20px;font-size:.9em;font-weight:bold;text-transform:uppercase}
    .status-pending{background:#fff3cd;color:#856404}
    .status-processing{background:#cce5ff;color:#004085}
    .status-completed{background:#d4edda;color:#155724}
    .status-cancelled{background:#f8d7da;color:#721c24}
    .order-actions{display:flex;gap:10px}
    .btn-small{padding:6px 12px;font-size:.8em}
    .notification{position:fixed;top:20px;right:20px;padding:15px 20px;border-radius:8px;color:#fff;font-weight:bold;z-index:1000;transform:translateX(400px);transition:transform .3s}
    .notification.show{transform:translateX(0)}
    .notification.success{background:#28a745}
    .notification.error{background:#dc3545}
    .empty-state{text-align:center;padding:60px 20px;color:#6c757d}
    @media(max-width:768px){.controls{flex-direction:column}.order-item{flex-direction:column;text-align:center;gap:15px}.order-actions{justify-content:center}}
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>üî® ForgeWorks Tracking</h1>
      <p>Professional Order Management System</p>
    </div>

    <div class="main-content">
      <div class="stats-grid">
        <div class="stat-card"><h3 id="totalOrders">0</h3><p>Total Orders</p></div>
        <div class="stat-card"><h3 id="activeOrders">0</h3><p>Active Orders</p></div>
        <div class="stat-card"><h3 id="completedOrders">0</h3><p>Completed Orders</p></div>
        <div class="stat-card"><h3 id="revenue">$0</h3><p>Total Revenue</p></div>
      </div>

      <div class="controls">
        <button class="btn btn-primary" onclick="toggleOrderForm()">‚ûï Add New Order</button>
        <button class="btn btn-secondary" onclick="exportData()">üìä Export Data</button>
        <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Clear All</button>
      </div>

      <div class="order-form" id="orderForm">
        <h3>Add New Order</h3>
        <form onsubmit="addOrder(event)">
          <div class="form-group">
            <label>Customer Name</label>
            <input id="customerName" required>
          </div>
          <div class="form-group">
            <label>Order Type</label>
            <select id="orderType" required>
              <option value="">Select Type</option>
              <option>Minecraft Plugin</option>
              <option>Server Setup</option>
              <option>Custom Mod</option>
              <option>Consulting</option>
              <option>Other</option>
            </select>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="orderDescription" rows="3" required></textarea>
          </div>
          <div class="form-group">
            <label>Price ($)</label>
            <input type="number" id="orderPrice" min="0" step="0.01" required>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select id="orderStatus" required>
              <option value="pending">Pending</option>
              <option value="processing">Processing</option>
              <option value="completed">Completed</option>
              <option value="cancelled">Cancelled</option>
            </select>
          </div>
          <div style="display:flex;gap:15px">
            <button type="submit" class="btn btn-primary">Add Order</button>
            <button type="button" class="btn btn-secondary" onclick="toggleOrderForm()">Cancel</button>
          </div>
        </form>
      </div>

      <div class="orders-table">
        <div class="table-header">üìã Active Orders</div>
        <div id="ordersList">
          <div class="empty-state">
            <h3>No orders yet</h3>
            <p>Add one and your friend will see it instantly!</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="notification" id="notification"></div>

  <script>
    // üî• REPLACE WITH YOUR FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyDREZoGOZ_EVs_45KlKNRTTlN8RQaJ6a3M",
      authDomain: "forgeworkstracker.firebaseapp.com",
      databaseURL: "https://forgeworkstracker-default-rtdb.firebaseio.com",
      projectId: "forgeworkstracker",
      storageBucket:  "forgeworkstracker.firebasestorage.app",
      messagingSenderId: "275204372986",
      appId: " 1:275204372986:web:06b4923aaa416eed714c43 ",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const ordersRef = db.ref("orders");

    let orders = [];

    ordersRef.on("value", snap => {
      orders = snap.val() ? Object.values(snap.val()) : [];
      renderOrders();
      updateStats();
    });

    function toggleOrderForm() {
      const f = document.getElementById('orderForm');
      f.style.display = f.style.display === 'none' ? 'block' : 'none';
    }

    function showNotification(msg, type = 'success') {
      const n = document.getElementById('notification');
      n.textContent = msg;
      n.className = `notification ${type}`;
      n.classList.add('show');
      setTimeout(() => n.classList.remove('show'), 3000);
    }

    function addOrder(e) {
      e.preventDefault();
      const order = {
        id: Date.now(),
        customerName: document.getElementById('customerName').value,
        orderType: document.getElementById('orderType').value,
        description: document.getElementById('orderDescription').value,
        price: parseFloat(document.getElementById('orderPrice').value),
        status: document.getElementById('orderStatus').value,
        createdAt: new Date().toISOString()
      };
      ordersRef.child(order.id).set(order);
      e.target.reset();
      toggleOrderForm();
      showNotification('Order added & synced!');
    }

    function deleteOrder(id) {
      if (confirm('Delete this order?')) {
        ordersRef.child(id).remove();
        showNotification('Order deleted & synced!');
      }
    }

    function updateOrderStatus(id, status) {
      if (!status) return;
      ordersRef.child(id).update({ status });
      showNotification('Status updated & synced!');
    }

    function clearAllData() {
      if (confirm('Clear ALL orders?')) {
        ordersRef.remove();
        showNotification('All orders cleared & synced!');
      }
    }

    function exportData() {
      if (!orders.length) return showNotification('No data to export!', 'error');
      const blob = new Blob([JSON.stringify(orders, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = Object.assign(document.createElement('a'), { href: url, download: `forgeWorks-${new Date().toISOString().split('T')[0]}.json` });
      a.click();
      URL.revokeObjectURL(url);
      showNotification('Data exported!');
    }

    function renderOrders() {
      const list = document.getElementById('ordersList');
      const active = orders.filter(o => o.status === 'pending' || o.status === 'processing');
      if (!active.length) {
        list.innerHTML = `<div class="empty-state"><h3>No active orders</h3><p>Add one and your friend will see it instantly!</p></div>`;
        return;
      }
      list.innerHTML = active.map(o => `
        <div class="order-item">
          <div class="order-info">
            <div class="order-title">${o.customerName} - ${o.orderType}</div>
            <div class="order-details">${o.description} ‚Ä¢ $${o.price.toFixed(2)} ‚Ä¢ ${new Date(o.createdAt).toLocaleDateString()}</div>
          </div>
          <div class="order-status status-${o.status}">${o.status}</div>
          <div class="order-actions">
            <select class="btn btn-small btn-secondary" onchange="updateOrderStatus(${o.id}, this.value)">
              <option value="">Update</option>
              <option value="pending">Pending</option>
              <option value="processing">Processing</option>
              <option value="completed">Completed</option>
              <option value="cancelled">Cancelled</option>
            </select>
            <button class="btn btn-small btn-danger" onclick="deleteOrder(${o.id})">Delete</button>
          </div>
        </div>`).join('');
    }

    function updateStats() {
      document.getElementById('totalOrders').textContent = orders.length;
      document.getElementById('activeOrders').textContent = orders.filter(o => o.status === 'pending' || o.status === 'processing').length;
      document.getElementById('completedOrders').textContent = orders.filter(o => o.status === 'completed').length;
      document.getElementById('revenue').textContent = '$' + orders.filter(o => o.status === 'completed').reduce((s, o) => s + o.price, 0).toFixed(2);
    }
  </script>
</body>
</html>